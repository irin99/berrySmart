<!DOCTYPE html>
<html lang="en">
<head>
  <title>Berry Smart | Homepage</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<style>
body {
    position: relative;
    font-family: Lato;
  }
  ul.nav-pills {
    top: 20px;
    position: fixed;
  }
  div.col-sm-10 div {
    
    font-size: 24px;
  }
  #otherlink {
    color: white;
  }
  a {
    color: #A288A6;
  }
a:hover {
    color: #5a2d53;
  }
  li:active {
  color:  #b8e1ff;
}

td {
   border-width: medium;
   padding-left:20px;
   margin:0;
}
table.grxd {
   width:100%;
   height:100%;
}
 #weather-table{
    width: 100%;
    border-radius: 15px;
    color: rgb(105, 105, 105)
 }
 #weather-table td{
 background-color: white;   
  border: 20px solid #B9B9B9;;
  padding: 8px;
  height:200px;
  width: 33.33%;
  text-align: center;
}

#weather-table td:hover {background-color:#B9B9B9;}


 
  #section1 {color: #fff; background-color: white;}
  #section2 {color: white ; background-color:  #B9B9B9;}
  #section3 {color:white; background-color: #A288A6;}
  #section4 {color: #fff; background-color: #b8e1ff;}
  #section5 {color: #fff; background-color: #5a2d53;}
  #section6 {color: #fff; background-color: #959595;}
  
  @media screen and (max-width: 810px) {
    #section1, #section2, #section3, #section4, #section5, #section6  {
      margin-left: 150px;
    }
  }
</style>  
</head>
<body data-spy="scroll" data-target="#myScrollspy" data-offset="20">

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header" style="text-align:center">
          <h4 class="modal-title">Login to Berry Smart </h4>
        </div>
        <div class="modal-body">
          
                <form id="modal-form">
                        <div class="form-group">
                          <label for="exampleInputEmail1">User name</label>
                          <input type="username" class="form-control" id="inputuser" placeholder="Enter username">
                        </div>
                        <div class="form-group">
                          <label for="exampleInputPassword1">Password</label>
                          <input type="password" class="form-control" id="inputpassword" placeholder="Password">
                        </div>
                </form>
        </div>
        <div class="modal-footer">
                <button type="submit" class="btn btn-primary" id="log-in" onclick="loginHandler()">Log In</button>
                <button type="submit" class="btn btn-primary" id="register" onclick="registerHandler()">Register</button>
                <br>
                <div class="alert alert-danger" role="alert" id="loginfail" style="display: none; float:left">
                Invalid username or password &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="alert alert-danger" role="alert" id="registerfail" style="display: none; float:left">
                    This username is already taken &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
        </div>
      </div>
    </div>
  </div>


    <div class="container-fluid">
      <div class="row row-eq-height">
        <nav class="col-sm-2" id="myScrollspy" style="text-align:center; background-color: grey;">
          <ul class="nav nav-pills nav-stacked" style="font-size:18px;">
            <li> <h3> Berry Smart</h3> <br><div id ="section0" style="text-align: center"><img src="https://i.ibb.co/2N9YCZx/logo-v2.png" alt="logo-v2"></div></li>
            <br><br>
            <li><span id="nameholder"></span> Dashboard</a></li>
            <br><br>
            
            <li class="active" style="text-align: left"><a href="#section1">Farm</a></li>
            <li><a href="#section2" style="text-align: left">Today's Weather</a></li>
            <li><a href="#section3" style="text-align: left">Statistics</a></li>
            <li><a href="#section4" style="text-align: left">Recommendations</a></li>
            <li><a href="#section5" style="text-align: left">About us</a></li>
            <li><a href="#section6" style="text-align: left">Contact us</a></li>
          </ul>
        </nav>
        <div class="col-sm-10">
            <br>
            <div id="section1" style="border-radius: 15px;"> 
                <div class="col-sm-5"></div>
                <div class="col-sm-2">            
                    <form>
                        <div class="form-group" style="text-align: center;">
                            <label for="sel1"></label>
                            <select class="form-control glyphicon fa" id="sel1" onchange="if (this.selectedIndex) createStat();">
                                <option value="-1">Choose an option</option>
                                <option  value="1" > Temperature</option>
                                <option value="2"> Humidity</option>
                                <option value="3"> Light</option>
                                <option value="4"> Moisture</option>
                            </select>  
                        </div>
                    </form>
                </div>
                <div class="col-sm-5"></div>
                <div class = "container-fluid" id="drawTable" > </div>
                <br>
                <div id = "legend-parent" style="font-size:15px; text-align: center" > </div>
            </div>

            <br><br><br>
            <div id="section2" style="border-radius: 15px; padding:25px;"> 
                
                
            <div class="container" style="text-align:center">
                <h1 style="text-align: center">Today's Weather</h1><br>
                <canvas id="weather-icon" ></canvas>
                <br> <span id="description" style="font-size:36px"></span> 
            </div>
            <br><br>
                         
                   

                <table id="weather-table">
                    <tr>
                        <td> <span id="predict-temp"><i class="fas fa-temperature-low"> </i> Temperature </span></td>
                        <td> <span id="predict-cloud"><i class="fas fa-cloud"></i> Cloudiness</span></td>
                        <td> <span id="predict-humid"><i class="glyphicon glyphicon-tint"></i> Humidity </span></td>
                    </tr>
                    <tr>
                        <td> <span id="predict-wind"><i class="fas fa-wind"></i> Wind Speed</span></td>
                        <td> <span id="predict-sunrise"><i class="fas fa-sun"></i> Sunrise</span></td>
                        <td> <span id="predict-sunset"><i class="far fa-sun"></i> Sunset </span></td>
                    </tr>
                </table>
     
            </div>   
            <br><br><br>     
            <div id="section3"  style="border-radius: 15px; padding-left: 10px; padding-right: 10px;">         
                <div class="row">    
                    <h1 style="text-align: center">Statistics</h1>
                </div>
                <br><br> 
                <div>
                    <a href="https://plot.ly/~garciag/6/?share_key=1rX36f5NwlJOuOWX923QD2" target="_blank" title="Plots of Random Data" style="display: block; text-align: center;"><img src="https://plot.ly/~garciag/6.png?share_key=1rX36f5NwlJOuOWX923QD2" alt="Plots of Random Data" style="max-width: 100%;width: 800px;"  width="800" onerror="this.onerror=null;this.src='https://plot.ly/404.png';" /></a>
                    <script data-plotly="garciag:6" sharekey-plotly="1rX36f5NwlJOuOWX923QD2" src="https://plot.ly/embed.js" async></script>
                </div>
                <br><br>
            </div>
            <br><br><br>
            <div id="section4"  style="border-radius: 15px; padding-left: 10px; padding-right: 10px;">         
                <div class="row">    
                    <h1 style="text-align: center">Recommendations</h1>
                    <br><br>
                    <div class="col-sm-1"></div>
                    <div class="col-sm-5">
                        Average Soil Moisture <br>
                        Average Temperature <br>
                        Average Brightness <br>
                        Average Humidity <br>
                        <br><br>
                    </div>
                </div> 
            </div>  
            <br><br><br>    
            <div id="section5"  style="border-radius: 15px; padding: 35px;">         
                <div class="row" style="font-size:20px">    
                    <h1 style="text-align: center">About Us</h1>
                    <br>
                    This is what berry smart is about and this is what inspires us. This section will be filled later with content. This is just for testing purpose
                </div>   
            </div>
            <br><br><br>
            <div id="section6"  style="border-radius: 15px; padding: 40px; ">         
                <div class="row" style="font-size:20px" >    
                    <h1 style="text-align: center">Contact Us</h1>
                    <br><br>
                       <!-- Carousel -->

                            <div class="col-sm-4"></div>
                            <div class="col-sm-4">
                            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                              <!-- Indicators -->
                              <ol class="carousel-indicators">
                                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                                <li data-target="#myCarousel" data-slide-to="1"></li>
                                <li data-target="#myCarousel" data-slide-to="2"></li>
                                <li data-target="#myCarousel" data-slide-to="3"></li>
                                
                              </ol>
                          
                              <!-- Wrapper for slides -->
                              <div class="carousel-inner">
                                <div class="item active" >
                                  <img src="https://i.ibb.co/z52Zxcz/gaby.png">
                                </div>
                          
                                <div class="item">
                                  <img src="https://i.ibb.co/PCQy5MR/irin.png">
                                </div>
                              
                                <div class="item">
                                  <img src="https://i.ibb.co/4SD8Vhw/nikhil.png">
                                </div>

                                <div class="item">
                                   <img src="https://i.ibb.co/xjQR0yZ/sunny.png" >
                                </div>
                              </div>

            
                          
                              <!-- Left and right controls -->
                              <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                                <span class="glyphicon glyphicon-chevron-left"></span>
                                <span class="sr-only">Previous</span>
                              </a>
                              <a class="right carousel-control" href="#myCarousel" data-slide="next">
                                <span class="glyphicon glyphicon-chevron-right"></span>
                                <span class="sr-only">Next</span>
                              </a>
                            </div>
                            </div>
                            <div class="col-sm-4"></div>
                          
                        
                        <br><br><br><br><br><br><br><br><br><br><br>
                        
                        <div class="container" style="text-align: center">
                        <br><br>
                        <span >Contact us and we will get back to you</span>
                        <br>
                       </div>
                       <br><br>
                       
                        <br> 
                        <div class="row">
                        <div class="col-sm-4"></div>
                        
                        <div class="col-sm-5">
                                <span class="glyphicon glyphicon-map-marker" aria-hidden="true" > </span>
                                <a id="otherlink" href="https://www.google.com/maps/search/MIT+cambridge+massachusetts/@42.3586467,-71.1020003,15z/data=!3m1!4b1">Cambridge, Massachusetts</a>
                                <br><br>
                                <span class="glyphicon glyphicon-envelope" aria-hidden="true"> </span>
                        <ul> 
                            <li><a href = "mailto: garciag@mit.edu" id="otherlink">Gabriella Garcia</a></li>
                            <li><a href = "mailto: irin@mit.edu" id="otherlink">Irin Ghosh</a></li>
                            <li><a href = "mailto: nmurthy@mit.edu" id="otherlink">Nikhil Murthy</a></li>
                            <li><a href = "mailto: sunnyt@mit.edu" id="otherlink">Sunny Tran </a></li>
                        </ul>
                        </div>
                        <div class="col-sm-3"></div>
                        </div> 
                </div> 
            </div>
            <br><br><br>
        </div>
      </div>
    </div>
</body> 
<script data-plotly="garciag:12" sharekey-plotly="77S29tuYXt5n5Htng2TX5O" src="https://plot.ly/embed.js" async></script>
<script data-plotly="garciag:14" sharekey-plotly="Abx85SFf1eFNKFNcRj5xnT" src="https://plot.ly/embed.js" async></script>
<script data-plotly="garciag:16" sharekey-plotly="JLz6f4hCA6WzRTnhAELwWi" src="https://plot.ly/embed.js" async></script>
<script data-plotly="garciag:18" sharekey-plotly="Ednw7UiM4aScS9eFaKBraG" src="https://plot.ly/embed.js" async></script>

<script>

$(document).ready(function () {
$('#myModal').modal('show');
});

function loginHandler(){
    let form = document.getElementById('modal-form');
    var user =  form.elements[0].value
    var password = form.elements[1].value
    
    const Http = new XMLHttpRequest();
    const url='https://608dev.net/sandbox/sc/irin/loginhandler.py'+'?user='+user+'&password='+password;
    Http.open("GET", url);
    Http.send();
    Http.onreadystatechange=(e)=>{
     console.log(Http.responseText)
     if (Http.responseText=='success'){
        document.getElementById('nameholder').innerText = user.charAt(0).toUpperCase() +user.slice(1)+"'s" ;
        $('#myModal').modal('hide');
     }
     else if (Http.responseText=='fail'){
        document.getElementById('loginfail').style.display = 'block';
        document.getElementById('registerfail').style.display = 'none';
     }
    }
  } 

  function registerHandler(){
    let form = document.getElementById('modal-form');
    var user =  form.elements[0].value
    var password = form.elements[1].value
    
    const Http = new XMLHttpRequest();
    const url='https://608dev.net/sandbox/sc/irin/loginhandler.py'+'?user='+user+'&password='+password;
    Http.open("POST", url);
    Http.send();
    Http.onreadystatechange=(e)=>{
     console.log(Http.responseText)
     if (Http.responseText=='success'){
        document.getElementById('nameholder').innerText = user.charAt(0).toUpperCase() +user.slice(1)+"'s" ;
        $('#myModal').modal('hide');
     }
     else if (Http.responseText=='fail'){
        document.getElementById('registerfail').style.display = 'block';
        document.getElementById('loginfail').style.display = 'none';
     }
    }
  } 

$(document).ready(function(){
    $.get("http://608dev.net/sandbox/sc/irin/weathericonhandler.py", function(data, status){
        var canvas = document.getElementById("weather-icon");
        var context = canvas.getContext("2d");

        var img = new Image();
        img.onload = function() {
        context.drawImage(img, 100, 50, 75, 75);
        };
        img.src =  "http://openweathermap.org/img/w/"+data+".png";
    });
   });


    $(document).ready(function(){
    $.get("http://608dev.net/sandbox/sc/irin/weatherhandler.py", function(data, status){
        $("#description").append(data);
    });
   });

    $(document).ready(function(){
    $.get("http://608dev.net/sandbox/sc/irin/cloudhandler.py", function(data, status){
        $("#predict-cloud").append('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
        $("#predict-cloud").append(data);
        $("#predict-cloud").append('%');
    });
   });

    $(document).ready(function(){
    $.get("http://608dev.net/sandbox/sc/irin/temperaturehandler.py", function(data, status){
        $("#predict-temp").append('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
        $("#predict-temp").append(data);
        $("#predict-temp").append( '&#176; C');
    });
   }); 

   $(document).ready(function(){
    $.get("http://608dev.net/sandbox/sc/irin/humidityhandler.py", function(data, status){
        $("#predict-humid").append('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
        $("#predict-humid").append(data);
        $("#predict-humid").append('%');
    });
   });

   $(document).ready(function(){
    $.get("http://608dev.net/sandbox/sc/irin/windhandler.py", function(data, status){
        $("#predict-wind").append('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
        $("#predict-wind").append(data);
        $("#predict-wind").append('m/s');
    });
   });

   $(document).ready(function(){
    $.get("http://608dev.net/sandbox/sc/irin/sunrisehandler.py", function(data, status){
        $("#predict-sunrise").append('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
        $("#predict-sunrise").append(data);
    });
   });

   $(document).ready(function(){
    $.get("http://608dev.net/sandbox/sc/irin/sunsethandler.py", function(data, status){
        $("#predict-sunset").append('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
        $("#predict-sunset").append(data);
    });
   });
    
    function createStat(){
        let el = document.getElementById('drawTable');
        el.innerHTML = '';
    if(document.getElementById('sel1').value=='1'){
        el.innerHTML = ' <a href="https://plot.ly/~garciag/16/?share_key=JLz6f4hCA6WzRTnhAELwWi" target="_blank" title="Click to view details" style="display: block; text-align: center;"><img src="https://plot.ly/~garciag/16.png?share_key=JLz6f4hCA6WzRTnhAELwWi" alt="Click to view details" style="width: 1000px; height:700px"   onerror="this.onerror=null;this.src="https://plot.ly/404.png";" /></a>';
        }
    else if(document.getElementById('sel1').value=='2'){
        el.innerHTML = '<a href="https://plot.ly/~garciag/18/?share_key=Ednw7UiM4aScS9eFaKBraG" target="_blank" title="Click to view details" style="display: block; text-align: center;"><img src="https://plot.ly/~garciag/18.png?share_key=Ednw7UiM4aScS9eFaKBraG" alt="Click to view details" style="width: 1000px; height:700px"  onerror="this.onerror=null;this.src="https://plot.ly/404.png";" /></a>';
        }  
    else if(document.getElementById('sel1').value=='3'){
        el.innerHTML = '<a href="https://plot.ly/~garciag/14/?share_key=Abx85SFf1eFNKFNcRj5xnT" target="_blank" title="Click to view details" style="display: block; text-align: center;"><img src="https://plot.ly/~garciag/14.png?share_key=Abx85SFf1eFNKFNcRj5xnT" alt="Click to view details" style="width: 1000px; height:700px"  onerror="this.onerror=null;this.src="https://plot.ly/404.png";" /></a>';
        } 
    else if(document.getElementById('sel1').value=='4'){
        el.innerHTML = '<a href="https://plot.ly/~garciag/12/?share_key=77S29tuYXt5n5Htng2TX5O" target="_blank" title="Click to view details" style="display: block; text-align: center;"><img src="https://plot.ly/~garciag/12.png?share_key=77S29tuYXt5n5Htng2TX5O" alt="Soil Moisture" style="width: 1000px; height:700px"  onerror="this.onerror=null;this.src="https://plot.ly/404.png";" /></a>';
        }       
    }
            
</script>       

</html>
